# Regras para Claude Code CLI - Nossa Maternidade

## üß† Sistema de Organiza√ß√£o Estruturado

**IMPORTANTE:** Antes de come√ßar qualquer tarefa, leia o `CONTEXTO.md` na raiz do projeto.

O `CONTEXTO.md` serve como "C√©rebro Externo" - mem√≥ria permanente do projeto. Ele cont√©m:

- Vis√£o e objetivos do projeto
- Regras fundamentais com "porqu√™" expl√≠cito
- Estado atual (m√©tricas, conquistas, bloqueadores)
- Pr√≥ximos passos priorizados
- Stack e arquitetura

**Sistema completo de organiza√ß√£o:**

- `CONTEXTO.md` - C√©rebro Externo (raiz do projeto)
- `docs/ORGANIZACAO/template-plano.md` - Template para planos de fases
- `docs/ORGANIZACAO/fluxo-trabalho.md` - Fluxo completo de 4 fases
- `docs/ORGANIZACAO/templates-prompts.md` - Prompts espec√≠ficos prontos
- `docs/ORGANIZACAO/guia-uso.md` - Guia pr√°tico completo

**Como usar:**

1. No in√≠cio de conversas importantes: "Leia @CONTEXTO.md e use como base"
2. Para tarefas complexas: Use `template-plano.md` para criar plano de fases
3. Para prompts espec√≠ficos: Consulte `templates-prompts.md`
4. Para processo completo: Siga `fluxo-trabalho.md`

## Contexto do Projeto

- **Plataforma**: React Native + Expo (iOS App Store + Android Google Play)
- **N√ÉO √© web**: Apenas componentes React Native nativos
- **Design System**: src/theme/tokens.ts
- **Refer√™ncia Visual**: LAYOUT_COMPLETO_REFERENCIA.md (site web apenas para refer√™ncia)

## Regras Cr√≠ticas de Design

### Tokens Obrigat√≥rios

- ‚úÖ SEMPRE usar `colors` do `useTheme()` hook
- ‚úÖ SEMPRE usar `Spacing` tokens (m√∫ltiplos de 4px)
- ‚úÖ SEMPRE usar `Typography.sizes` e `Typography.weights`
- ‚úÖ SEMPRE usar `Radius` tokens para bordas
- ‚ùå NUNCA valores hardcoded de cor, espa√ßamento ou tipografia

### Componentes Primitivos

- ‚úÖ SEMPRE usar componentes de `src/components/primitives/`
- ‚úÖ Box, Text, Heading, Button, HapticButton, Input
- ‚ùå NUNCA usar View, Text ou TouchableOpacity diretamente (exceto casos espec√≠ficos)

### Acessibilidade WCAG AAA

- ‚úÖ Contraste m√≠nimo 7:1 (texto normal) ou 4.5:1 (texto grande)
- ‚úÖ Alvos de toque m√≠nimos 44x44pt
- ‚úÖ accessibilityLabel em todos os componentes interativos
- ‚úÖ accessibilityHint quando necess√°rio
- ‚úÖ Suporte a Dynamic Type (allowFontScaling)

### Dark Mode

- ‚úÖ SEMPRE implementar suporte completo
- ‚úÖ Todas as cores devem vir do theme context
- ‚úÖ Testar transi√ß√£o entre temas

### Performance Mobile

- ‚úÖ Usar FlatList para listas (n√£o ScrollView com map)
- ‚úÖ useMemo e useCallback quando apropriado
- ‚úÖ Lazy loading de imagens (expo-image)
- ‚úÖ getItemLayout em FlatList quando poss√≠vel

### Responsividade

- ‚úÖ SafeAreaView para iOS notch
- ‚úÖ KeyboardAvoidingView em formul√°rios
- ‚úÖ Flexbox para layout responsivo
- ‚úÖ Testar em m√∫ltiplos tamanhos de tela

## Valida√ß√£o Antes de Commit

Antes de aceitar mudan√ßas, sempre valide:

1. Tokens de design usados corretamente?
2. Dark mode implementado?
3. Acessibilidade WCAG AAA?
4. Componentes primitivos usados?
5. Performance otimizada?
6. Responsividade testada?

## Refer√™ncias Obrigat√≥rias

- **C√©rebro Externo:** `CONTEXTO.md` (raiz do projeto) - **LEIA PRIMEIRO**
- **Design System (Fonte √önica da Verdade):**
  - `docs/design/DESIGN_PRINCIPLES.md` - Princ√≠pios fundamentais de design
  - `docs/design/DESIGN_SYSTEM_REFERENCE.md` - Guia definitivo do sistema
  - `docs/design/COMPONENT_PATTERNS.md` - Padr√µes de componentes
  - `docs/design/DESIGN_DECISIONS.md` - Decis√µes estabelecidas (cores, espa√ßamento, etc.)
  - `docs/design/DESIGN_QUICK_REFERENCE.md` - Cheat sheet r√°pido
- Design System Tokens: `src/theme/tokens.ts`
- Layout Completo: `LAYOUT_COMPLETO_REFERENCIA.md`
- Guia Mobile: `MOBILE_IMPLEMENTATION_GUIDE.md`
- Prompts: `PROMPTS_DESIGN_VALIDATION.md`
- Sistema de Organiza√ß√£o: `docs/ORGANIZACAO/` (templates, fluxos, guias)

## üé® Documenta√ß√£o de Design (Fonte √önica da Verdade)

**IMPORTANTE:** Quando houver d√∫vida sobre design, cores, espa√ßamento, tipografia ou padr√µes de componentes, consulte a documenta√ß√£o de design em `docs/design/`. Esta documenta√ß√£o elimina ambiguidades e estabelece decis√µes definitivas.

**Documentos de Design:**

1. **DESIGN_PRINCIPLES.md** - Filosofia, valores, objetivos e princ√≠pios fundamentais
2. **DESIGN_SYSTEM_REFERENCE.md** - Guia completo do sistema moderno, hierarquia e padr√µes de uso
3. **COMPONENT_PATTERNS.md** - Padr√µes obrigat√≥rios para cria√ß√£o de componentes (Atomic Design)
4. **DESIGN_DECISIONS.md** - Todas as decis√µes estabelecidas (cores, tipografia, espa√ßamento, etc.)
5. **DESIGN_QUICK_REFERENCE.md** - Cheat sheet r√°pido para desenvolvimento

**Regra de Ouro:** N√£o "adivinhe" decis√µes de design. Tudo est√° documentado em `docs/design/`. Consulte primeiro, depois implemente.

## Otimiza√ß√£o Claude no Cursor

### Configura√ß√µes Recomendadas

- ‚úÖ Modelo padr√£o: Claude Sonnet 4.5 (melhor custo/benef√≠cio)
- ‚úÖ Codebase Indexing: Ativo para melhor contexto
- ‚úÖ Context Window: Large (8192 tokens)
- ‚úÖ Configura√ß√µes em: `.cursor/settings.json`

### Uso Eficiente

- ‚úÖ Use `@mentions` para contexto espec√≠fico (`@arquivo.tsx`, `@pasta/`)
- ‚úÖ Inicie novas conversas para novos t√≥picos
- ‚úÖ Use Composer (Cmd+Shift+I) para edi√ß√µes multi-arquivo
- ‚úÖ Agrupe perguntas relacionadas
- ‚ùå Evite conversas muito longas (economiza tokens)

### Verifica√ß√£o

- Execute `npm run verify:cursor` para verificar configura√ß√£o
- Consulte `docs/CURSOR_CLAUDE_SETUP.md` para guia completo

## Modo Aut√¥nomo - Instru√ß√µes Especiais

Quando em modo aut√¥nomo (2h), siga estas regras:

### Checkpoints Frequentes

- Criar checkpoint a cada 5 minutos (300 segundos)
- Salvar estado em `.claude/state/tasks.json`
- Atualizar `progress.txt` ap√≥s cada etapa completa
- Usar git para marcar progresso: `git commit -m "checkpoint: [descri√ß√£o]"`

### Valida√ß√£o Cont√≠nua

- Rodar `npm run type-check` ap√≥s cada mudan√ßa significativa
- Rodar `npm run lint` antes de prosseguir para pr√≥xima tarefa
- Testar funcionalidade ap√≥s cada feature completa
- Validar com `npm run validate` a cada 30 minutos

### Comunica√ß√£o e Progresso

- Reportar progresso a cada 10 minutos em `progress.txt`
- Alertar sobre bloqueadores imediatamente
- Documentar decis√µes importantes em `progress.txt`
- Atualizar `tasks.json` com status atual

### Limites e Paradas

- Parar se encontrar mais de 3 erros consecutivos
- Parar se progresso estagnar por 15 minutos sem mudan√ßas
- Parar se exceder 2 horas de trabalho (7200 segundos)
- Parar se limite de itera√ß√µes for atingido (100 itera√ß√µes)

### Estrutura de Trabalho

1. Ler `CONTEXTO.md` e `CLAUDE.md` antes de come√ßar
2. Definir plano de a√ß√£o claro
3. Executar tarefas em ordem de prioridade
4. Validar ap√≥s cada tarefa
5. Atualizar estado ap√≥s cada tarefa
6. Criar checkpoint a cada 5 minutos

### Documenta√ß√£o

- Consulte `docs/CURSOR_AUTONOMOUS_MODE.md` para guia completo
- Use `.claude/state/` para rastreamento de estado
- Mantenha `progress.txt` atualizado

## Lembrete Constante

Este √© um projeto MOBILE (iOS/Android), n√£o web. Todo c√≥digo deve ser React Native nativo.
